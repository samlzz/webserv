<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Headers - Webserv Test Suite</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Test Headers HTTP</h1>
            <p>Analyser les headers de réponse du serveur</p>
        </header>

        <nav>
            <ul>
                <li><a href="/index.html">Accueil</a></li>
                <li><a href="/get.html">GET / HEAD</a></li>
                <li><a href="/post.html">POST</a></li>
                <li><a href="/upload.html">Upload / PUT</a></li>
                <li><a href="/delete.html">DELETE</a></li>
                <li><a href="/cgi.html">CGI</a></li>
                <li><a href="/errors.html">Erreurs</a></li>
                <li><a href="/redirect.html">Redirections</a></li>
                <li><a href="/headers.html" class="active">Headers</a></li>
                <li><a href="/autoindex.html">Autoindex</a></li>
                <li><a href="/chunked.html">Chunked</a></li>
                <li><a href="/stress.html">Stress / Timeout</a></li>
            </ul>
        </nav>

        <!-- Inspecter headers d'une ressource -->
        <div class="card">
            <h2>Inspecter les headers de réponse (HEAD)</h2>
            <p>Envoie une requête HEAD pour voir uniquement les headers sans body.</p>
            <button class="btn btn-primary" onclick="testHeadersGet('/index.html')">HEAD /index.html</button>
            <button class="btn btn-primary" onclick="testHeadersGet('/css/style.css')">HEAD /css/style.css</button>
            <button class="btn btn-primary" onclick="testHeadersGet('/js/app.js')">HEAD /js/app.js</button>
            <button class="btn btn-primary" onclick="testHeadersGet('/uploads/')">HEAD /uploads/</button>
            <button class="btn btn-primary" onclick="testHeadersGet('/cgi-bin/test.py')">HEAD /cgi-bin/test.py</button>
        </div>

        <!-- Requête avec headers custom -->
        <div class="card">
            <h2>� Requête avec header personnalisé</h2>
            <div class="form-group">
                <label for="headers-url">URL :</label>
                <input type="text" id="headers-url" value="/index.html">
            </div>
            <div class="form-group">
                <label for="custom-header-name">Header Name :</label>
                <input type="text" id="custom-header-name" placeholder="X-Custom-Header">
            </div>
            <div class="form-group">
                <label for="custom-header-value">Header Value :</label>
                <input type="text" id="custom-header-value" placeholder="my-value">
            </div>
            <button class="btn btn-success" onclick="testHeadersCustom()">Envoyer GET avec header</button>
        </div>

        <div class="card">
            <h2>Réponse</h2>
            <div id="headers-response" class="response-box">
                <span class="status">En attente...</span>
            </div>
        </div>

        <!-- Documentation -->
        <div class="card">
            <h2>Headers HTTP importants</h2>
            <h3>Headers de Réponse</h3>
            <table>
                <tr><th>Header</th><th>Description</th><th>Exemple</th></tr>
                <tr><td><code>Content-Type</code></td><td>Type MIME de la réponse</td><td>text/html; charset=utf-8</td></tr>
                <tr><td><code>Content-Length</code></td><td>Taille de la réponse</td><td>2048</td></tr>
                <tr><td><code>Server</code></td><td>Identification du serveur</td><td>webserv/1.0</td></tr>
                <tr><td><code>Date</code></td><td>Date de la réponse</td><td>Mon, 01 Jan 2024 12:00:00 GMT</td></tr>
                <tr><td><code>Connection</code></td><td>Type de connexion</td><td>keep-alive / close</td></tr>
                <tr><td><code>Set-Cookie</code></td><td>Définir un cookie</td><td>session_id=xyz; Path=/</td></tr>
                <tr><td><code>Location</code></td><td>URL de redirection</td><td>/new-page</td></tr>
                <tr><td><code>Transfer-Encoding</code></td><td>Encodage de transfert</td><td>chunked</td></tr>
            </table>

            <h3>Vérifications à faire :</h3>
            <ul>
                <li><code>Content-Type</code> correct selon l'extension (.html → text/html, .css → text/css, .js → application/javascript)</li>
                <li><code>Content-Length</code> présent pour les réponses non-chunked</li>
                <li><code>Connection: keep-alive</code> par défaut en HTTP/1.1</li>
                <li>HEAD retourne les mêmes headers que GET (sans body)</li>
            </ul>
        </div>

        <footer><p>Webserv Test Suite — 42 Project</p></footer>
    </div>
    <script src="/js/app.js"></script>
</body>
</html>
